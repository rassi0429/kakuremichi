# kakuremichi - コンポーネント定義

## システムの登場人物

### 1. 中央管理サーバー（コントロールプレーン）
**役割**:
- Web管理UIの提供
- REST APIの提供
- WebSocketサーバー（設定配信）
- データベース（設定・状態管理）
- ユーザー認証・認可
- 入口ノード・エッジクライアントの管理

**名前候補**:
- [ ] Control Server
- [ ] Management Server
- [ ] Kokoa Manager
- [ ] Kokoa Hub
- [ ] Kokoa Control
- [ ] その他:

**決定した名前**: **Control**

---

### 2. 入口ノード（データプレーン・ゲートウェイ）
**役割**:
- 外部ユーザーからのトラフィック受信
- エッジクライアントへのトンネル確立
- トラフィック中継
- 負荷分散
- SSL/TLS終端

**特徴**:
- 複数配置可能
- 動的に追加・削除可能
- 中央管理サーバーから設定を受信

**決定した名前**: **Gateway**

---

### 3. エッジクライアント（オリジン側クライアント）
**役割**:
- プライベートネットワーク側に配置
- 入口ノードとのトンネル確立（アウトバウンド接続のみ）
- ローカルアプリケーションへのプロキシ
- ヘルスチェック
- ステータス報告

**特徴**:
- 軽量
- ポート開放不要
- 中央管理サーバーから設定を受信

**決定した名前**: **Agent**

---

### 4. プライベートアプリケーション
**役割**:
- 実際に公開したいアプリケーション
- エッジクライアントがプロキシする対象

**これはシステムの外部なので命名不要**

---

## コンポーネント間の関係

### コントロールプレーン（設定・管理）
```
Control
  ├─WebSocket→ Gateway群（設定配信）
  └─WebSocket→ Agent群（設定配信）
```

### データプレーン（トラフィック）
```
外部ユーザー → Gateway ─トンネル→ Agent → アプリ
```

---

## 命名の方向性

### 採用案: シンプル（役割ベース）
- 中央管理サーバー: **Control**
- 入口ノード: **Gateway**
- エッジクライアント: **Agent**

### 案2: シンプル
- 中央管理サーバー: **Kokoa Server**
- 入口ノード: **Kokoa Edge**
- エッジクライアント: **Kokoa Client**

### 案3: 統一的
- 中央管理サーバー: **Kokoa Hub**
- 入口ノード: **Kokoa Node**
- エッジクライアント: **Kokoa Connector**

### 案4: Pangolinライク（動物テーマ）
- 中央管理サーバー: **Kokoa** (コアなので)
- 入口ノード: **?** （動物名）
- エッジクライアント: **?** （動物名）

---

## その他の登場人物（将来的に必要かも）

### ロードバランサー（オプション）
**役割**: 複数の入口ノードへの振り分け
**名前候補**:
- DNS Round Robin（外部）
- Kokoa LB（もし自作するなら）

### 認証プロキシ（オプション）
**役割**: 中央管理サーバーとは別に認証を担当
**名前候補**: Kokoa Auth

### CLIツール
**役割**: コマンドラインから管理操作
**名前候補**:
- kokoa-cli
- kokoactl

---

**作成日**: 2025-11-22
**最終更新**: 2025-11-22
